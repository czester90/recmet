<section id='content'>
  <section class='container'>
    <section class='row featured-items'>
    <aside class='col-md-3'>
        <section class='widget'>
            <section class='widget-title uppercase'>
                <div class='inner'>
                    <div class="pull-left mar-10-auto">
                        <strong>Ogłoszenia</strong>
                    </div>
                </div>
            </section>
            <section class='widget-content'>
                <form action="#">
                    <div class='widget-section'>
                        <div class='inner'>
                            <label for="location">Szukaj</label>
                            <input type="text" name='search' id='search' placeholder="Szukaj..." class='input-block-level'/>
                        </div>
                    </div>
                    <div class='widget-section'>
                        <div class='inner'>
                            <label for="propertyType">Kategorie</label>
                            <ul class="menulist">
                                <?php foreach($this->categories as $category): ?>
                                    <li><a href="<?= $this->url('advert/sublist', array('id' => $category->getId(), 'url' => $category->getUrl())) ?>"><?= $category->getName(); ?> (100)</a></li>
                                    <?php if(in_array($category->getId(), $this->category_ids)): ?>
                                        <ul class="submenulist">
                                            <?php foreach($this->subcategories as $sub): ?>
                                                <li><a href="<?= $this->url('advert/sublist', array('id' => $sub->getId(), 'url' => $sub->getUrl())) ?>"><?= $sub->getName(); ?></a></li>
                                            <?php endforeach; ?>
                                        </ul>
                                    <?php endif; ?>
                                <?php endforeach; ?>
                            </ul>
                        </div>
                    </div>
                    <div class='widget-section'>
                        <div class='inner'>
                            <label for="location">Rodzaje oferty</label><br />
                            <input type="radio" name='offer_type' id='offer_type' value='buy'/> <span>Kupię</span><br />
                            <input type="radio" name='offer_type' id='offer_type' value='sell'/> <span>Sprzedam</span>
                        </div>
                    </div>
                    <div class='widget-section'>
                        <div class='inner'>
                            <label for="location">Ilość</label>
                            <input type="text" name='kg' id='kg' placeholder="Kilogramy" class='input-block-level'/>
                        </div>
                    </div>
                    <div class='widget-section'>
                        <div class='inner'>
                            <label for="location">Lokalizacja</label>
                            <input type="text" name='district' id='district' placeholder="Województwo" class='input-block-level'/>
                            <input type="text" name='city' id='city' placeholder="Miejscowość" class='input-block-level mar-top5'/>
                        </div>
                    </div>
                    <div class='widget-section'>
                        <div class='inner'>
                            <label for="location">Cena</label><br />
                            <input type="text" name='district' id='district' placeholder="0" value="0" class='width50'/>
                            <input type="text" name='city' id='city' placeholder="20000" value="20000" class='width50'/>
                        </div>
                    </div>
                    <div class='widget-section'>
                        <div class='inner'>
                            <label for="location">Transport</label><br />
                            <input type="checkbox" name='transport' value='1'/> <span>Własny</span><br />
                            <input type="checkbox" name='transport' value='2'/> <span>W ofercie</span>
                        </div>
                    </div>
                    <section class='widget-buttons'>
                        <div class='inner'>
                            <button class="btn btn-default btn-primary" type="submit">Szukaj Ofert</button>
                        </div>
                    </section>
                </form>
            </section>
        </section>
    </aside>
      <section class='col-md-9'>
        <div class='row'>
          <div class='col-md-12'>
            <div class='top-bar'>
              <div class='bar-title'>
                <div class='inner'>
                  <div class='pull-left custom-margin'>
                    <strong><?= ($this->resultPage * $this->currentPage) - $this->resultPage + 1; ?></strong> - <strong><?= ($this->resultPage * $this->currentPage + $this->resultPage) - $this->resultPage; ?></strong> z <strong><?= $this->resultCount ?></strong> wyników
                  </div>
                  <div class='pull-right results-per-page custom-margin'>
                    <span class='text-line'>Wyników na stronie:</span>
                    <ul>
                      <li class='active'><a href="#">20</a></li>
                      <li>|</li>
                      <li><a href="#">40</a></li>
                      <li>|</li>
                      <li><a href="#">60</a></li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class='bar-bottom'>
                <div class='inner'>
                  <div class='pull-left custom-margin'>
                    <span class='text-line'>Sortowanie:</span>
                    <select class='selectpicker'>
                      <option value="date">Data</option>
                      <option value="visits">Ilość wyświetleń</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class='row'>
          <div class='col-md-12 featured-item-list'>
            <?php foreach($this->adverts as $advert): ?>
                <div class='featured-item featured-list'>
              <div class='top'>
                <div class='inner-border'>
                  <div class='inner-padding'>
                    <figure>
                      <img src="<?= $this->basePath().Advert\Entity\Image::IMAGE_PATH_VIEW.$advert->getUser_id().DIRECTORY_SEPARATOR.$advert->getImages()->get(0)->getName(); ?>" alt="" />
                      <div class='banner'><?= Advert\Entity\Advert::advertTypeArray($advert->getAdvertType()); ?></div>
                      <a href="<?= $this->url('advert/view', array('id' => $advert->getId(), 'url' => $advert->getUrl())); ?>" class='figure-hover'>Zoom</a>
                    </figure>
                    <div class='right'>
                      <h3><a href="<?= $this->url('advert/view', array('id' => $advert->getId(), 'url' => $advert->getUrl())); ?>"><?= $advert->getName() ?></a></h3>
                      <p>Las Vegas, NV</p>
                      <div class='description'>
                        <p><?= $advert->getDescription() ?></p>
                      </div>
                      <div class='price-wrapper'>
                        <div class='price'>PLN <?= $advert->getAmount() ?></div>
                        <div class='rate'>/całość</div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
              <div class='bottom'>
                <div class='inner-border'>
                  <div class='inner-padding'>
                      <div class="pull-left bottom-advert">
                          <span>Data zakończenia: <?= $advert->getCreated_at()->format('d-m-Y H:i:s') ?></span>
                          <span class="space-line"> | </span>
                          <span>Przeglądnięte: <?= $advert->getVisits(); ?></span>
                      </div>
                    <div class='star-rating'>
                      <button class='star active'>1 Star</button>
                      <button class='star active'>2 Star</button>
                      <button class='star active'>3 Star</button>
                      <button class='star active'>4 Star</button>
                      <button class='star active'>5 Star</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <?php endforeach; ?>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
              <?php if($this->pages > 1): ?>
                  <ul class="pagination pagination-sm pull-right">
                      <?php if($this->currentPage != 1): ?>
                          <li class='first-element'><a href="<?= $this->url('advert', array('page' => $this->currentPage-1)); ?>">Prev</a></li>
                      <?php endif; ?>
                    <?php for($x = 1; $x <= $this->pages; $x++): ?>
                        <li <?php if($x == $this->currentPage): ?>class="active"<?php endif; ?>><a href="<?= $this->url('advert', array('page' => $x)); ?>"><?= $x; ?></a></li>
                    <?php endfor; ?>
                      <?php if($this->currentPage != $this->pages): ?>
                          <li class='last-element'><a href="<?= $this->url('advert', array('page' => $this->currentPage+1)); ?>">Next</a></li>
                      <?php endif; ?>
                  </ul>
              <?php endif; ?>
          </div>
        </div>
      </section>
    </section>
  </section>
</section>